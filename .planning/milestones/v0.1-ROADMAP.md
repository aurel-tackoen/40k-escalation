# Milestone v0.1: Round-to-Phase Terminology Rename

**Status:** SHIPPED 2026-02-06
**Phases:** 1-5
**Total Plans:** 10

## Overview

This roadmap covers the systematic renaming of "Round" to "Phase" throughout the 40k Escalation League Manager application. The rename follows the natural dependency chain: database schema first, then API layer, then state management, then UI components, and finally test verification. Each phase delivers a complete, verifiable layer of the rename.

## Phases

### Phase 1: Database Schema
**Goal**: Database uses "phase" terminology consistently with no data loss
**Depends on**: Nothing (first phase)
**Requirements**: DB-01, DB-02
**Plans**: 1 plan

Plans:
- [x] 01-01: Create migration and update schema.ts

**Success Criteria:**
1. Database columns use `phase` naming (phase_id, phase_number, current_phase)
2. Migration runs successfully without data loss on existing leagues
3. Schema.ts exports `phases` table and uses phase column names

### Phase 2: API Layer
**Goal**: API endpoints use "phases" terminology in routes and payloads
**Depends on**: Phase 1
**Requirements**: DB-03, API-01, API-02, API-03
**Plans**: 2 plans

Plans:
- [x] 02-01: Update armies and pairings API handlers
- [x] 02-02: Update match handlers and rename admin folder

**Success Criteria:**
1. API routes use `/api/phases` instead of `/api/rounds`
2. Request and response bodies use `phase` property names
3. API handlers compile and run without referencing old variable names

### Phase 3: State Management
**Goal**: Frontend state management uses "phase" terminology throughout
**Depends on**: Phase 2
**Requirements**: STORE-01, STORE-02, STORE-03
**Plans**: 2 plans

Plans:
- [x] 03-01: Update Pinia store and composables with phase terminology
- [x] 03-02: Gap closure: Fix remaining composables with .round property access

**Success Criteria:**
1. Pinia store state uses `phases` and `currentPhase` property names
2. Store getters and actions reference phase terminology
3. Composables use phase naming (usePhaseLookup, etc.)
4. Store fetches data from new API endpoints successfully

### Phase 4: User Interface
**Goal**: Users see "Phase" terminology everywhere in the application
**Depends on**: Phase 3
**Requirements**: UI-01, UI-02, UI-03
**Plans**: 4 plans

Plans:
- [x] 04-01: Component props, composable exports, and parent page bindings
- [x] 04-02: Template text updates (filters, labels, badges, timelines)
- [x] 04-03: Admin components template text updates
- [x] 04-04: Gap closure: DashboardView and LeagueSetupView terminology

**Success Criteria:**
1. All component props and data properties use phase terminology
2. All user-visible text shows "Phase" instead of "Round"
3. URL routes use phase terminology (if applicable)
4. Application renders correctly with no console errors

### Phase 5: Test Verification
**Goal**: All tests pass with updated terminology, confirming rename is complete
**Depends on**: Phase 4
**Requirements**: TEST-01, TEST-02
**Plans**: 1 plan

Plans:
- [x] 05-01: Fix remaining source files and run test verification

**Success Criteria:**
1. All test files use phase terminology
2. All existing tests pass with the renamed codebase
3. No references to "round" remain in active code paths

## Progress

| Phase | Plans Complete | Status | Completed |
|-------|----------------|--------|-----------|
| 1. Database Schema | 1/1 | Complete | 2026-02-05 |
| 2. API Layer | 2/2 | Complete | 2026-02-05 |
| 3. State Management | 2/2 | Complete | 2026-02-05 |
| 4. User Interface | 4/4 | Complete | 2026-02-06 |
| 5. Test Verification | 1/1 | Complete | 2026-02-06 |

---

## Milestone Summary

**Key Decisions:**
- "Phase" chosen over "Stage" to match escalation league terminology
- Used PostgreSQL ALTER TABLE RENAME for zero-downtime migration
- API routes updated in same commit as schema for compile-time consistency
- Preserved firstRoundPairingMethod/subsequentRoundMethod (tournament settings, not phase terminology)
- Internal variable names (addRound, removeRound, roundForm) preserved for code stability
- match.round API property preserved (matches use round internally)
- Default new phase name is "Phase N" instead of "Round N"

**Issues Resolved:**
- DashboardView and LeagueSetupView gaps found during Phase 4 verification, closed by plan 04-04
- Composable .round property access gaps found during Phase 3 verification, closed by plan 03-02
- store createLeague action accessing response.data.rounds instead of response.data.phases, fixed in Phase 5
- LeaguesManager template using league.rounds instead of league.phases, fixed in Phase 5

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- Internal variable names (roundForm, showRoundModal, editingRound) use round naming in admin components
- 48 pre-existing test failures in UserMenu.test.ts (Pinia store initialization, unrelated to rename)

---
_For current project status, see .planning/ROADMAP.md_
