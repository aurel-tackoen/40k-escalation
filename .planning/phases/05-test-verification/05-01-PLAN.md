---
phase: 05-test-verification
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/components/LeagueCard.vue
  - app/components/LeagueSwitcher.vue
  - app/components/PaintingProgress.vue
  - app/components/views/DashboardView.vue
  - app/components/admin/LeaguesManager.vue
  - app/data/default-rules.js
  - app/data/placeholders.js
autonomous: true

must_haves:
  truths:
    - "No user-visible 'Round' text remains in the application"
    - "All test files use phase terminology (already satisfied)"
    - "All existing tests pass with no new failures from rename work"
    - "grep for 'currentRound' in templates returns zero matches"
  artifacts:
    - path: "app/components/LeagueCard.vue"
      provides: "Phase display in league cards"
      contains: "Phase {{ league.currentPhase"
    - path: "app/components/LeagueSwitcher.vue"
      provides: "Phase display in league switcher dropdown"
      contains: "Phase {{ league.currentPhase"
    - path: "app/data/default-rules.js"
      provides: "Phase terminology in auto-generated rules"
      contains: "Each phase has"
    - path: "app/data/placeholders.js"
      provides: "Phase terminology in form placeholder hints"
      contains: "Phase 1"
  key_links:
    - from: "app/components/LeagueCard.vue"
      to: "league.currentPhase"
      via: "template interpolation"
      pattern: "league\\.currentPhase"
    - from: "app/components/LeagueSwitcher.vue"
      to: "league.currentPhase"
      via: "template interpolation"
      pattern: "league\\.currentPhase"
---

<objective>
Complete the Round-to-Phase terminology rename by fixing remaining source files and verifying all tests pass.

Purpose: This is the FINAL phase of the rename project. Research revealed 24 source files still contain "round" references in user-visible text. This plan fixes them and verifies the test suite.

Output: Clean codebase with consistent "Phase" terminology everywhere, all tests passing.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-test-verification/05-RESEARCH.md

Preserved names (DO NOT change):
- `firstRoundPairingMethod` / `subsequentRoundMethod` - Tournament pairing settings
- `match.round` - Database/API field for match records
- Internal variable names (roundForm, showRoundModal, editForm.currentRound) - already decided
- `Math.round()` - JavaScript standard
- `league.rounds` array name in API responses (data structure, not display text)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix remaining component templates</name>
  <files>
    app/components/LeagueCard.vue
    app/components/LeagueSwitcher.vue
    app/components/admin/LeaguesManager.vue
  </files>
  <action>
Update template text and property access in these files:

**LeagueCard.vue:**
1. Line 174 comment: "Round Info" -> "Phase Info"
2. Line 177: `Round {{ league.currentRound || 1 }} of {{ league.rounds?.length || 0 }}` -> `Phase {{ league.currentPhase || 1 }} of {{ league.phases?.length || 0 }}`
3. Line 180 comment: "Round Info" -> "Phase Info"
4. Line 183: `Round {{ league.currentRound || 1 }}` -> `Phase {{ league.currentPhase || 1 }}`
5. Line 193: `v-if="isMyLeague && league.rounds"` -> `v-if="isMyLeague && league.phases"`
6. Line 195: `{{ league.rounds?.[league.currentRound - 1]?.pointLimit || 0 }}` -> `{{ league.phases?.[league.currentPhase - 1]?.pointLimit || 0 }}`

**LeagueSwitcher.vue:**
1. Line 115: `Round {{ league.currentRound || 1 }}` -> `Phase {{ league.currentPhase || 1 }}`

**LeaguesManager.vue:**
1. Line 300: Toast message `'Round updated successfully'` -> `'Phase updated successfully'`
2. Line 519: Already shows "Phase" label, but data binding uses `league.currentRound`. The data comes from API which uses currentPhase, but this admin component receives league objects from `/api/admin/leagues`. Check if the API returns currentPhase or currentRound and update accordingly.

Note: Keep internal variable names (editForm.currentRound, roundForm, showRoundModal) unchanged per prior decision.
  </action>
  <verify>
Run: `grep -n "Round {{ league" app/components/*.vue app/components/**/*.vue`
Expected: No matches (all converted to "Phase {{ league")

Run: `grep -n "league.currentRound" app/components/*.vue`
Expected: Only internal admin form bindings, no template display bindings
  </verify>
  <done>
LeagueCard shows "Phase X of Y" instead of "Round X of Y"
LeagueSwitcher dropdown shows "Phase X" instead of "Round X"
LeaguesManager toast says "Phase updated successfully"
  </done>
</task>

<task type="auto">
  <name>Task 2: Fix data files with user-visible text</name>
  <files>
    app/data/default-rules.js
    app/data/placeholders.js
  </files>
  <action>
Update user-visible text in data files:

**default-rules.js (armyBuilding section, lines ~18-27):**
1. "Each round has a specific point limit (see Round Configuration)" -> "Each phase has a specific point limit (see Phase Configuration)"
2. "Lists can be modified between rounds, but not during a round" -> "Lists can be modified between phases, but not during a phase"

**default-rules.js (matchScheduling section, lines ~44-47):**
1. "Each player must complete at least one match per round" -> "Each player must complete at least one match per phase"
2. "Matches must be completed within the round timeframe" -> "Matches must be completed within the phase timeframe"

**default-rules.js (leagueStandings section, line ~68):**
1. "Final standings at the end of all rounds" -> "Final standings at the end of all phases"

**placeholders.js (armyNameHint fields):**
Update all occurrences of "Round 1" to "Phase 1":
- Line 9: `"Emperor's Fist - Round 1"` -> `"Emperor's Fist - Phase 1"`
- Line 20: `"Bloodbound Reavers - Round 1"` -> `"Bloodbound Reavers - Phase 1"`
- Line 31: `"The Iron Legion - Round 1"` -> `"The Iron Legion - Phase 1"`
- Line 42: `"Rangers of the North - Round 1"` -> `"Rangers of the North - Phase 1"`
- Line 53: `"Sons of Horus 7th Company - Round 1"` -> `"Sons of Horus 7th Company - Phase 1"`
- Line 65: `"My Army Name - Round 1"` -> `"My Army Name - Phase 1"`

Note: Keep "roundName" placeholder key unchanged (it's an internal identifier).
  </action>
  <verify>
Run: `grep -i "round" app/data/default-rules.js | grep -v "firstRound\|subsequentRound"`
Expected: No user-visible "round" text remains

Run: `grep "Round 1" app/data/placeholders.js`
Expected: No matches
  </verify>
  <done>
Generated league rules use "phase" terminology consistently
Placeholder hints show "Phase 1" instead of "Round 1"
  </done>
</task>

<task type="auto">
  <name>Task 3: Run tests and verify no regressions</name>
  <files>None (verification only)</files>
  <action>
1. Run the full test suite: `npm test -- --run`

2. Capture baseline: Research showed 53 pre-existing failures unrelated to rename (Lucide icon mocks, Pinia setup). Any NEW failures would indicate a regression from our changes.

3. Check for TypeScript/build errors: `npm run build`

4. Run final grep verification:
```bash
# Search for remaining "round" in template display contexts
grep -rn "Round {{" app/
grep -rn ":currentRound=" app/
grep -rn "league.currentRound" app/components/ --include="*.vue" | grep -v "editForm\|roundForm\|v-model"
```

5. If tests pass with no new failures and grep shows only preserved patterns, the rename is complete.
  </action>
  <verify>
Test output shows same baseline (53 pre-existing failures, 205+ passes)
No new test failures related to "phase" vs "round"
Build succeeds with no TypeScript errors
Grep verification shows no user-visible "Round" text
  </verify>
  <done>
TEST-02 satisfied: No new test failures from rename work
Success Criteria #3 satisfied: No "round" references in active code paths (user-visible)
Build passes, application runs correctly
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. **User-visible text check:**
```bash
grep -rn "Round" app/components/ --include="*.vue" | grep -v "firstRound\|subsequentRound\|showRoundModal\|roundForm\|editForm"
```
Expected: No matches

2. **Template binding check:**
```bash
grep -rn "currentRound" app/components/ --include="*.vue" | grep "{{"
```
Expected: No matches (all template interpolations use currentPhase)

3. **Data file check:**
```bash
grep -i "round" app/data/*.js | grep -v "roundName\|firstRound\|subsequentRound"
```
Expected: No matches

4. **Test suite:**
```bash
npm test -- --run
```
Expected: Same baseline as research (205 pass, 53 pre-existing fail)
</verification>

<success_criteria>
1. All user-visible "Round" text converted to "Phase"
2. LeagueCard, LeagueSwitcher show "Phase X"
3. Default rules use "phase" terminology
4. Placeholder hints use "Phase 1"
5. Test suite shows no new failures
6. Build succeeds
7. grep verification confirms no remaining "round" in display contexts
</success_criteria>

<output>
After completion, create `.planning/phases/05-test-verification/05-01-SUMMARY.md` using summary template.

This is the FINAL phase of the Round-to-Phase rename project. Upon completion:
- Update ROADMAP.md to mark Phase 5 complete
- Update STATE.md to reflect project completion
</output>
